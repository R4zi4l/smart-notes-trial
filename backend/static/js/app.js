(function(e){function t(t){for(var r,s,o=t[0],c=t[1],l=t[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&p.push(i[s][0]),i[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(p.length)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(r=!1)}r&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},i={app:0},a=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/static/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"03ea":function(e,t,n){"use strict";var r=n("f0d4"),i=n.n(r);i.a},"03f7":function(e,t,n){},"0699":function(e,t,n){"use strict";var r=n("794b"),i=n.n(r);i.a},"0b1c":function(e,t,n){},"1e78":function(e,t,n){},2166:function(e,t,n){"use strict";var r=n("aac3"),i=n.n(r);i.a},"2cd0":function(e,t,n){},"2d12":function(e,t,n){},"301d":function(e,t,n){"use strict";var r=n("74d8"),i=n.n(r);i.a},3686:function(e,t,n){},"38aa":function(e,t,n){"use strict";var r=n("5299"),i=n.n(r);i.a},"456e":function(e,t,n){},"470e":function(e,t,n){"use strict";var r=n("a207"),i=n.n(r);i.a},"47aa":function(e,t,n){"use strict";var r=n("2cd0"),i=n.n(r);i.a},"4ca3":function(e,t,n){"use strict";var r=n("456e"),i=n.n(r);i.a},5274:function(e,t,n){"use strict";var r=n("e882"),i=n.n(r);i.a},5299:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=n("2f62"),a=n("8c4f"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{attrs:{id:"view-application"}},[n("router-view")],1)},o=[],c={name:"Application"},l=c,u=(n("f434"),n("2877")),d=Object(u["a"])(l,s,o,!1,null,null,null),p=d.exports,f=(n("7db0"),n("c975"),n("a434"),n("5530")),m=n("b85c"),h=(n("96cf"),n("1da1")),_=n("8814"),v=n("ec26"),g=(n("fb6a"),n("fa7d")),y=function(e){var t={},n={},r={};for(var i in e.note){var a=e.note[i];t[i]=b("note",i,{updated:a[1],title:a[2],text:a[3]})}for(var s in e.category){var o=e.category[s];n[s]=b("category",s,{updated:o[1],title:o[2],text:o[3],parent:o[4]})}for(var c in e.categoryentity){var l=e.categoryentity[c];r[c]=b("categoryentity",c,{updated:l[2]})}return{note:t,category:n,categoryentity:r}},b=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"note"===e?{id:t||"",updated:n.updated?new Date(n.updated):new Date,title:n.title||"",text:n.text||""}:"category"===e?{id:t||"",updated:n.updated?new Date(n.updated):new Date,title:n.title||"",text:n.text||"",parent:n.parent||void 0}:"categoryentity"===e?{category:x(t||""),entity:E(t||""),updated:n.updated?new Date(n.updated):new Date}:{}},w=function(e,t){return t.updated&&(t.updated=Object(g["b"])(t.updated)),t},E=function(e){return e.slice(e.length-36)},x=function(e){return e.slice(0,36)},O=function(e,t){return e+t},C=5e3,k=new _["a"],M=function(){return{id:Object(v["a"])(),status:"created",timer:void 0,items:[],prepared:[]}},$=[M()],I=function(e){k.addNotificationListener("update_models_items",(function(t){return e.dispatch("updateModels",t)}))},j={plugins:[I],state:{user:void 0,note:{},category:{},categoryentity:{}},getters:{newId:function(){return function(){return Object(v["a"])()}}},mutations:{clearState:function(e){r["a"].set(e,"user",void 0),r["a"].set(e,"note",{}),r["a"].set(e,"category",{}),r["a"].set(e,"categoryentity",{})},setUser:function(e,t){r["a"].set(e,"user",t)},setModel:function(e,t){var n=t.model,i=t.data;r["a"].set(e,n,i)},setModelItem:function(e,t){var n=t.model,i=t.id,a=t.item;r["a"].set(e[n],i,Object.assign(e[n][i]||{},a))},deleteModelItem:function(e,t){var n=t.model,i=t.id;r["a"].delete(e[n],i)}},actions:{clearState:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,$=[M()],n("clearState");case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),status:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,k.request({type:"status"});case 3:if(r=e.sent,"ok"!==r.status){e.next=9;break}r.session?n("setUser",{username:r.username}):n("setUser",void 0),document.cookie="session="+r.session+";expires="+new Date(Date.now()+6048e5).toUTCString(),e.next=10;break;case 9:throw r;case 10:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),login:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,i=n.email,a=n.password,e.next=4,k.request({type:"login",email:i,password:a});case 4:if(s=e.sent,"ok"!==s.status){e.next=10;break}r("setUser",{username:s.username}),document.cookie="session="+s.session+";expires="+new Date(Date.now()+6048e5).toUTCString(),e.next=11;break;case 10:throw s;case 11:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),register:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,i=n.username,a=n.email,s=n.password,e.next=4,k.request({type:"register",username:i,email:a,password:s});case 4:if(o=e.sent,"ok"!==o.status){e.next=10;break}r("setUser",{username:o.username}),document.cookie="session="+o.session+";expires="+new Date(Date.now()+6048e5).toUTCString(),e.next=11;break;case 10:throw o;case 11:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),logout:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),loadModels:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,k.request({type:"load_models"});case 3:if(r=e.sent,"ok"!==r.status){e.next=9;break}for(a in i=y(r),i)n("setModel",{model:a,data:i[a]});e.next=10;break;case 9:throw r;case 10:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),updateModels:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.commit,i=n.accepted,a=Object(m["a"])(i);try{for(a.s();!(s=a.n()).done;)o=s.value,console.log("UPDATE MODELS",o),"insert"===o.status?r("setModelItem",{model:o.model,id:o.id,item:b(o.model,o.id,o.item)}):"update"===o.status?r("setModelItem",{model:o.model,id:o.id,item:o.item}):"delete"===o.status&&r("deleteModelItem",{model:o.model,id:o.id})}catch(c){a.e(c)}finally{a.f()}case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),setModelItem:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s,o,c,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.state,i=t.commit,a=t.dispatch,s=n.model,o=n.id,c=n.item,r[s][o]?(l=r[s][o].updated,c.updated=new Date,u="update"):(c=b(s,o,c),c.updated=l=new Date,u="insert"),i("setModelItem",{model:s,id:o,item:c}),$[$.length-1].items.push({model:s,id:o,updated:l,status:u,item:c}),clearTimeout($[$.length-1].timer),$[$.length-1].timer=setTimeout((function(){return a("sendTransactions")}),C);case 7:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),deleteModelItem:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s,o,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.state,i=t.commit,a=t.dispatch,s=n.model,o=n.id,r[s][o]){e.next=4;break}return e.abrupt("return");case 4:c=r[s][o].updated,l="delete",i("deleteModelItem",{model:s,id:o}),$[$.length-1].items.push({model:s,id:o,updated:c,status:l,item:{}}),clearTimeout($[$.length-1].timer),$[$.length-1].timer=setTimeout((function(){return a("sendTransactions")}),C);case 9:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),sendTransactions:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a,s,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=$[$.length-1],$.push(M()),n=Object(m["a"])(t.items);try{for(i=function(){var e=r.value,n=t.prepared.find((function(t){return t.model===e.model&&t.id===e.id}));n?"update"===e.status?"delete"!==n.status&&(n.item=Object(f["a"])(Object(f["a"])({},n.item),e.item)):"delete"===e.status&&"insert"===n.status?t.prepared.splice(t.prepared.indexOf(n),1):(n.status=e.status,n.item=e.item):t.prepared.push(Object(f["a"])({},e))},n.s();!(r=n.n()).done;)i()}catch(l){n.e(l)}finally{n.f()}a=Object(m["a"])(t.prepared);try{for(a.s();!(s=a.n()).done;)o=s.value,o.updated&&(o.updated=Object(g["b"])(o.updated)),o.item=w(o.model,o.item)}catch(l){a.e(l)}finally{a.f()}return t.state="sent",e.next=9,k.request({type:"update_models_items",id:t.id,items:t.prepared});case 9:if(c=e.sent,"ok"!==c.status){e.next=14;break}console.log("sendTransactions","EVERYTHIN IS OK",c),e.next=15;break;case 14:throw c;case 15:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}},T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{attrs:{id:"index-page"}},[r("section",{attrs:{id:"index-page-main"}},[r("v-bookmark",[r("object",{attrs:{id:"index-page-logo",type:"image/svg+xml",data:n("d0bc"),tabindex:"-1"}},[r("img",{attrs:{src:n("d0bc"),alt:"Logo"}})]),r("h2",[e._v("SmartNotes")]),r("p",[e._v(" Make your life easier with a couple of notes. SmartNotes will helps you to keep everyday routine in order. ")]),r("button",{class:{active:"login"===e.authorizationType},on:{click:function(t){e.authorizationType="login",t.target.blur()}}},[e._v(" Login ")]),r("button",{class:{active:"register"===e.authorizationType},on:{click:function(t){e.authorizationType="register",t.target.blur()}}},[e._v(" Register ")])])],1),r("section",{attrs:{id:"index-page-sidebar"}},[r("v-bookmark",[r("div",{attrs:{id:"index-page-spacer"}})]),r("v-authorization",{attrs:{type:e.authorizationType}})],1),e._m(0)])},D=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{attrs:{id:"index-page-footer"}},[n("p",[e._v("Go to "),n("a",[e._v("mobile version.")])])])}],S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bookmark"},[n("div",[e._t("default")],2),n("div",[n("svg",{attrs:{viewBox:"0 0 375 182",preserveAspectRatio:"xMidYMin slice"}},[n("path",{attrs:{d:"M190.5 182L375 71.0185V36.6742L190.5 147.326L0 36.6742V71.0185L190.5 182Z"}}),n("path",{attrs:{d:"M190.5 112.652L375 2V0L-3.05176e-05 0L0 2L190.5 112.652Z"}})])])])},P=[],R={name:"Bookmark"},L=R,H=(n("b965"),Object(u["a"])(L,S,P,!1,null,"489db7cd",null)),N=H.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"authorization"},["login"===e.type?[n("h2",[e._v("Login")]),n("label",{class:{error:"email"in e.clientErrors||"email"in e.serverErrors}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],key:"login-username",attrs:{type:"email",placeholder:"Email...",autocomplete:"username"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),e._m(0)]),n("label",{class:{error:"password"in e.clientErrors||"password"in e.serverErrors}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],key:"login-password",attrs:{type:"password",placeholder:"Password...",autocomplete:"current-password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._m(1)]),n("button",{on:{click:e.login}},[e._v("Submit")]),n("ul",[e._l(e.serverErrors,(function(t,r){return n("li",{key:r,staticClass:"error"},[e._v(" "+e._s(t)+" ")])})),n("li",{class:{error:"email"in e.clientErrors}},[e._v(" The email must be a valid string e.g. happiness@gmail.com. ")]),n("li",{class:{error:"password"in e.clientErrors}},[e._v(" The password should be at least 8 to 32 characters long and have one lowercase, one uppercase and one digit characters. ")])],2)]:e._e(),"register"===e.type?[n("h2",[e._v("Register")]),n("label",{class:{error:"username"in e.clientErrors||"username"in e.serverErrors}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],key:"register-name",attrs:{type:"text",placeholder:"Username...",autocomplete:"false"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._m(2)]),n("label",{class:{error:"email"in e.clientErrors||"email"in e.serverErrors}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],key:"register-username",attrs:{type:"email",placeholder:"Email...",autocomplete:"username"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),e._m(3)]),n("label",{class:{error:"password"in e.clientErrors||"password"in e.serverErrors}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],key:"register-password",attrs:{type:"password",placeholder:"Password...",autocomplete:"new-password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._m(4)]),n("label",{class:{error:"confirm"in e.clientErrors||"confirm"in e.serverErrors}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.confirm,expression:"confirm"}],key:"register-confirm",attrs:{type:"password",placeholder:"Confirm password...",autocomplete:"new-password"},domProps:{value:e.confirm},on:{input:function(t){t.target.composing||(e.confirm=t.target.value)}}}),e._m(5)]),n("button",{on:{click:e.register}},[e._v("Submit")]),n("ul",[e._l(e.serverErrors,(function(t,r){return n("li",{key:r,staticClass:"error"},[e._v(" "+e._s(t)+" ")])})),n("li",{class:{error:"username"in e.clientErrors}},[e._v(" The username should be at least 4 to 32 characters long. ")]),n("li",{class:{error:"email"in e.clientErrors}},[e._v(" The email must be a valid string e.g. happiness@gmail.com. ")]),n("li",{class:{error:"password"in e.clientErrors}},[e._v(" The password should be at least 8 to 32 characters long and have one lowercase, one uppercase and one digit characters. ")]),n("li",{class:{error:"confirm"in e.clientErrors}},[e._v(" Passwords should match. ")])],2)]:e._e()],2)},W=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{attrs:{tabindex:"-1"}},[n("span",{staticClass:"icon-email"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{attrs:{tabindex:"-1"}},[n("span",{staticClass:"icon-password"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{attrs:{tabindex:"-1"}},[n("span",{staticClass:"icon-account"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{attrs:{tabindex:"-1"}},[n("span",{staticClass:"icon-email"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{attrs:{tabindex:"-1"}},[n("span",{staticClass:"icon-password"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{attrs:{tabindex:"-1"}},[n("span",{staticClass:"icon-password"})])}],A=(n("b64b"),{name:"Authorization",props:{type:{type:String,default:"register"}},data:function(){return{username:"",email:"",password:"",confirm:"",clientErrors:{},serverErrors:{}}},methods:{login:function(){if(this.clientErrors={},this.serverErrors={},this.validateEmail(this.email)||(this.clientErrors["email"]=!0),this.validatePassword(this.password)||(this.clientErrors["password"]=!0),0===Object.keys(this.clientErrors).length&&this.clientErrors.constructor===Object){var e=this;this.$store.dispatch("login",{email:this.email,password:this.password}).catch((function(t){r["a"].set(e.serverErrors,t.type,t.message)}))}},register:function(){if(this.clientErrors={},this.serverErrors={},this.validateUsername(this.username)||(this.clientErrors["username"]=!0),this.validateEmail(this.email)||(this.clientErrors["email"]=!0),this.validatePassword(this.password)||(this.clientErrors["password"]=!0),this.validatePassword(this.confirm)&&this.confirm===this.password||(this.clientErrors["confirm"]=!0),0===Object.keys(this.clientErrors).length&&this.clientErrors.constructor===Object){var e=this;this.$store.dispatch("register",{username:this.username,email:this.email,password:this.password}).catch((function(t){r["a"].set(e.serverErrors,t.type,t.message)}))}},validateUsername:function(e){return/^.{4,32}$/.test(e)},validateEmail:function(e){return/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/i.test(e)},validatePassword:function(e){return/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,32}$/.test(e)}}}),B=A,K=(n("bef3"),Object(u["a"])(B,U,W,!1,null,"f7885716",null)),q=K.exports,z={name:"Index",components:{"v-bookmark":N,"v-authorization":q},data:function(){return{authorizationType:"login"}}},G=z,Y=(n("6b49"),Object(u["a"])(G,T,D,!1,null,"4bba8064",null)),F=Y.exports,J=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{attrs:{id:"view-desktop"}},[r("div",{attrs:{id:"view-desktop-navigation"}},[r("div",{staticClass:"logo"},[r("object",{attrs:{type:"image/svg+xml",data:n("d0bc"),tabindex:"-1"}},[r("img",{attrs:{src:n("d0bc"),alt:"Logo"}})]),r("h4",[e._v("SmartNotes")])]),r("button",{class:{active:"account"===e.$route.name},on:{click:function(t){e.$router.push("account").catch((function(){}))}}},[r("h5",[e._v(e._s(e.username))])]),r("button",{class:{active:"notes"===e.$route.name},on:{click:function(t){e.$router.push("notes").catch((function(){}))}}},[r("h5",[e._v("Notes")])]),r("button",{class:{active:"categories"===e.$route.name},on:{click:function(t){e.$router.push("categories").catch((function(){}))}}},[r("h5",[e._v("Categories")])]),r("button",{class:{active:"settings"===e.$route.name},on:{click:function(t){e.$router.push("settings").catch((function(){}))}}},[r("h5",[e._v("Settings")])])]),r("router-view",{attrs:{settingsMenu:e.settingsMenu},on:{"show-settings-menu":e.showSettingsMenuHandler,"show-dialog":e.showDialogHandler}}),r("v-list-frame",{staticClass:"view-desktop-list",class:{hidden:!e.settingsMenu},attrs:{id:"view-desktop-settings"}},[r("div",{staticClass:"header"},[r("div",{staticClass:"title"},[r("h5",[e._v("Settings")]),r("v-icon-button",{attrs:{icon:"icon-close"},on:{click:function(t){e.settingsMenu=!1}}})],1),r("v-search")],1),r("div",{staticClass:"content"})]),r("div",{class:{hidden:!e.dialogs.length},attrs:{id:"view-desktop-dialogs"}},e._l(e.dialogs,(function(t,n){return r("v-dialog",{key:"dialog"+n,attrs:{title:t.title,text:t.text,buttons:t.buttons},on:{close:function(n){return e.closeDialogHandler(t)}}})})),1)],1)},V=[],X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"icon-button",on:{click:function(t){return e.$emit("click",t)}}},[n("span",{class:e.icon})])},Z=[],Q={name:"IconButton",props:{icon:String}},ee=Q,te=(n("03ea"),Object(u["a"])(ee,X,Z,!1,null,"421e294f",null)),ne=te.exports,re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search"},[n("input",{ref:"search",attrs:{type:"text",placeholder:"Search..."},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}),n("button",{class:{hidden:e.value},on:{click:function(t){return e.$refs.search.focus()}}},[n("span",{staticClass:"icon-search"})]),n("button",{class:{hidden:!e.value},on:{click:function(t){e.$emit("input",""),e.$refs.search.focus()}}},[n("span",{staticClass:"icon-close"})])])},ie=[],ae={name:"Search",props:{value:String}},se=ae,oe=(n("301d"),Object(u["a"])(se,re,ie,!1,null,"446c1f16",null)),ce=oe.exports,le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dialog"},[n("div",[n("h5",[e._v(e._s(e.title))])]),n("div",[n("div",[n("p",[e._v(e._s(e.text))])]),n("div",e._l(e.buttons,(function(t,r){return n("button",{key:"button"+r,on:{click:function(n){return e.clickHandler(t.handler)}}},[e._v(" "+e._s(t.title)+" ")])})),0)])])},ue=[],de={name:"Dialog",props:{title:{type:String,default:""},text:{type:String,default:""},buttons:{type:Array,default:function(){return[]}}},methods:{clickHandler:function(e){e instanceof Function&&e(),this.$emit("close")}}},pe=de,fe=(n("83fd"),Object(u["a"])(pe,le,ue,!1,null,"1a01e2cd",null)),me=fe.exports,he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-list-frame"},[e._t("default")],2)},_e=[],ve={name:"ListFrame"},ge=ve,ye=(n("47aa"),Object(u["a"])(ge,he,_e,!1,null,"03ae83b5",null)),be=ye.exports,we={name:"Desktop",components:{"v-icon-button":ne,"v-search":ce,"v-dialog":me,"v-list-frame":be},data:function(){return{settingsMenu:!1,dialogs:[]}},computed:{username:function(){var e;return(null===(e=this.$store.state.user)||void 0===e?void 0:e.username)||"Jhon Doe"}},methods:{showSettingsMenuHandler:function(e){this.settingsMenu=e},showDialogHandler:function(e){this.dialogs.push(e)},closeDialogHandler:function(e){var t=this.dialogs.indexOf(e);-1!==t&&this.dialogs.splice(t,1)}}},Ee=we,xe=(n("5274"),Object(u["a"])(Ee,J,V,!1,null,"54434cfe",null)),Oe=xe.exports,Ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{attrs:{id:"view-notes"}},[n("div",{attrs:{id:"view-notes-list"}},[n("v-list-frame",{attrs:{id:"view-notes-list-items"}},[n("div",{staticClass:"header"},[n("div",{staticClass:"title"},[n("h5",[e._v("Notes")]),n("v-icon-button",{class:{active:e.filtersMenu},attrs:{icon:"icon-filter"},on:{click:function(t){e.filtersMenu=!e.filtersMenu}}}),n("v-icon-button",{class:{active:e.settingsMenu},attrs:{icon:"icon-settings"},on:{click:function(t){return e.$emit("show-settings-menu",!e.settingsMenu)}}})],1),n("v-search",{model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),n("v-notes-list",{staticClass:"content",attrs:{search:e.search,filters:e.filters,selected:e.note},on:{select:function(t){return e.selectNoteHandler(t)}}})],1),n("v-list-frame",{class:{hidden:!e.filtersMenu},attrs:{id:"view-notes-list-filters"}},[n("div",{staticClass:"header"},[n("div",{staticClass:"title"},[n("h5",[e._v("Filters")]),n("v-icon-button",{attrs:{icon:"icon-close"},on:{click:function(t){e.filtersMenu=!1}}})],1)]),n("v-filters-list",{staticClass:"content",attrs:{filters:e.filters}})],1)],1),n("v-note-editor",{attrs:{search:e.search,id:"view-notes-content",item:e.note},on:{action:e.actionHandler,"show-dialog":function(t){return e.$emit("show-dialog",t)}}})],1)},ke=[],Me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-notes-list"},e._l(e.items,(function(t,r){return n("div",{key:r,staticClass:"item",class:{active:e.selected.id===r},on:{click:function(n){return e.$emit("select",t)}}},[n("div",[n("h5",[e._v(e._s(t.title))]),e.categoriesLength(e.categories[r])?n("div",{staticClass:"categories"},e._l(e.categories[r],(function(t){return n("button",{key:t.id+r},[n("h6",[e._v(e._s(t.title))])])})),0):e._e(),n("p",[e._v(e._s(t.text))])])])})),0)},$e=[],Ie=(n("99af"),n("a623"),n("a630"),n("7039"),n("07ac"),n("ac1f"),n("3ca3"),n("466d"),n("841c"),n("2909")),je={name:"NotesList",props:{selected:{type:Object,default:function(){return{}}},search:String,filters:Array},computed:{items:function(){var e=this,t=this.search,n=this.$store.state.note,r={},i={};if(this.filters){var a=function(t){var i=n[t];e.filters.every((function(e){return e.handler(t)}))&&(r[t]=i)};for(var s in n)a(s)}else r=n;if(t)for(var o in r){var c=r[o],l=[c.title,c.text].concat(Object(Ie["a"])(Array.from(Object.values(this.categories[o]||{}),(function(e){return e.title}))));this.match(t,l)&&(i[o]=c)}else i=r;return i},categories:function(){var e=this.$store.state.note,t=this.$store.state.category,n=this.$store.state.categoryentity,r={};for(var i in n){var a=E(i),s=x(i);a in e&&(r[a]||(r[a]={}),r[a][s]=t[s])}return r}},methods:{categoriesLength:function(e){return Object.getOwnPropertyNames(e||{}).length},match:function(e,t){e=e.toLowerCase();var n,r=Object(m["a"])(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(-1!==i.toLowerCase().indexOf(e))return!0}}catch(a){r.e(a)}finally{r.f()}return!1}}},Te=je,De=(n("8a37"),Object(u["a"])(Te,Me,$e,!1,null,"c1802c0a",null)),Se=De.exports,Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-filters-list"},[e._l(e.groups,(function(t){return[n("div",{key:"group-"+t.id,staticClass:"group",on:{click:function(n){return e.toggleGorup(t)}}},[n("div",[n("h5",[e._v(e._s(t.title))]),n("span",{staticClass:"icon-arrow-drop-up",class:{hidden:!e.collapsed[t.id]}}),n("span",{staticClass:"icon-arrow-drop-down",class:{hidden:e.collapsed[t.id]}})])]),e._l(t.items,(function(r){return n("div",{key:t.id+r.id,staticClass:"item",class:{hidden:e.collapsed[t.id],active:e.isItemActive(t,r)},on:{click:function(n){return e.toggleItem(t,r)}}},[n("div",[n("span",[e._v(e._s(r.title))])])])}))]}))],2)},Re=[],Le=(n("c740"),{name:"FiltersList",props:{filters:{type:Array,default:function(){return[]}}},data:function(){return{collapsed:{}}},computed:{actives:function(){for(var e=[],t=0;t<this.filters.length;++t){var n=this.filters[t];e.push({id:t+"-"+n.item,title:n.title,text:""})}return r["a"].set(this.collapsed,"acvtive",!1),e},categories:function(){var e=this.$store.state.category,t=[],n=function t(n){return n.parent?t(e[n.parent])+" / "+n.title:n.title};for(var i in e){var a=e[i];t.push({id:i,title:n(a),text:a.text})}return r["a"].set(this.collapsed,"category",!1),t},groups:function(){var e=[];return this.actives.length&&e.push({id:"active",title:"Active",items:this.actives}),this.categories.length&&e.push({id:"category",title:"Category",items:this.categories}),e}},methods:{isItemActive:function(e,t){return"active"===e.id||-1!==this.filters.findIndex((function(n){return n.group===e.id&&n.item===t.id}))},toggleGorup:function(e){r["a"].set(this.collapsed,e.id,!this.collapsed[e.id])},toggleItem:function(e,t){var n=this;if("active"===e.id){var i=this.filters.findIndex((function(e,n){return n+"-"+e.item===t.id}));-1!==i&&r["a"].delete(this.filters,i)}else if("category"===e.id){var a=this.filters.findIndex((function(n){return n.group===e.id&&n.item===t.id}));-1!==a?r["a"].delete(this.filters,a):r["a"].set(this.filters,this.filters.length,{group:e.id,item:t.id,title:t.title,handler:function(e){return!!n.$store.state.categoryentity[O(t.id,e)]}})}}}}),He=Le,Ne=(n("64ef"),Object(u["a"])(He,Pe,Re,!1,null,"7cb969c2",null)),Ue=Ne.exports,We=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-note-editor"},[n("div",{staticClass:"header"},[n("v-icon-button",{attrs:{icon:"icon-add"},on:{click:function(t){return e.$emit("action","add")}}}),n("v-icon-button",{attrs:{icon:"icon-delete"},on:{click:function(t){return e.$emit("action","delete")}}})],1),n("div",{staticClass:"content"},[n("v-text-editor",{staticClass:"title",attrs:{value:e.item.title,search:e.search,placeholder:"Note title",multiline:!1},on:{input:function(t){return e.titleInput(t)}}}),n("div",{staticClass:"category"},[e._l(e.categories,(function(t){return n("v-category-badge",{key:t.id,attrs:{category:t,search:e.search},on:{remove:e.removeCategoryHandler}})})),n("v-category-input",{on:{create:e.createCategoryHandler,select:e.selectCategoryHandler}})],2),n("v-text-editor",{staticClass:"text",attrs:{value:e.item.text,search:e.search,placeholder:"Note text"},on:{input:function(t){return e.textInput(t)}}})],1)])},Ae=[],Be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-text-editor"},[e.multiline?n("textarea",{domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}):n("input",{domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}),n("span",{class:{hidden:e.value}},[e._v(e._s(e.placeholder))]),n("div",{domProps:{innerHTML:e._s(e.processValue(e.value,e.search))}})])},Ke=[],qe=(n("4d63"),n("25f0"),n("a1f0"),n("5319"),n("1276"),window.navigator.userAgent.toLowerCase()),ze=!!qe.match(/msie|trident\/7|edge/),Ge=-1!==qe.indexOf("windows phone"),Ye=!Ge&&!!qe.match(/ipad|iphone|ipod/),Fe=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},Je=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},Ve={isIE:ze,isWinPhone:Ge,isIOS:Ye,escapeHtml:Fe,escapeRegExp:Je},Xe=function(e,t){if(t){t=Ve.escapeRegExp(t),t=new RegExp(t,"ig");var n=e.split(t);if(n.length>1){var r=Object(Ie["a"])(e.matchAll(t));if(Ve.isIE){e=Ve.escapeHtml(n[0]).replace(/ /g," <wbr>");for(var i=0;i<r.length;++i)e+="<span class='highlighter'>"+Ve.escapeHtml(r[i][0]).replace(/ /g," <wbr>")+"</span>"+Ve.escapeHtml(n[i+1]).replace(/ /g," <wbr>")}else{e=Ve.escapeHtml(n[0]);for(var a=0;a<r.length;++a)e+="<span class='highlighter'>"+Ve.escapeHtml(r[a][0])+"</span>"+Ve.escapeHtml(n[a+1])}}else e=Ve.escapeHtml(n[0])}else e=Ve.escapeHtml(e),Ve.isIE&&(e=e.replace(/ /g," <wbr>"));return e=e.replace(/\n$/g,"\n\n"),e},Ze={name:"TextEditor",props:{multiline:{type:Boolean,default:!0},placeholder:{type:String,default:""},search:{type:String,default:""},value:{type:String,default:""}},methods:{processValue:function(e,t){return Xe(e,t)}}},Qe=Ze,et=(n("6c1d"),n("2166"),Object(u["a"])(Qe,Be,Ke,!1,null,"dcf8b57e",null)),tt=et.exports,nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"root",staticClass:"v-category-input"},[n("div",[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],ref:"input",class:{active:!!e.active},attrs:{type:"text"},domProps:{value:e.title},on:{blur:function(t){return e.cancelHandler(t)},input:function(t){t.target.composing||(e.title=t.target.value)}}}),n("button",{on:{click:e.createHandler}},[n("span",{staticClass:"icon-add",on:{blur:function(t){return e.cancelHandler(t)}}})])]),n("div",{class:{active:!!e.active&&e.filtered.length}},[e._l(e.filtered,(function(t){return n("button",{key:t.id,on:{click:function(n){return e.selectHandler(t.id)},blur:function(t){return e.cancelHandler(t)}}},[e._v(" "+e._s(t.title)+" ")])})),e.filtered.length&&e.categories.length>10?n("p",[e._v("...")]):e._e()],2)])])},rt=[],it={name:"CategoryInput",data:function(){return{active:!1,title:""}},computed:{categories:function(){var e=this.$store.state.category,t=[];for(var n in e)t.push(e[n]);return t},filtered:function(){var e,t=[],n=Object(m["a"])(this.categories);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(-1!==r.title.toLowerCase().indexOf(this.title.toLowerCase())&&(t.push(r),t.length>10))break}}catch(i){n.e(i)}finally{n.f()}return t}},methods:{createHandler:function(){var e=this;this.active?(this.title&&this.$emit("create",this.title),this.active=!1):(this.active=!0,this.title="",this.$nextTick((function(){e.$refs.input.focus()})))},selectHandler:function(e){this.$emit("select",e),this.active=!1},cancelHandler:function(e){this.$refs.root.contains(e.relatedTarget)||(this.active=!1)}}},at=it,st=(n("f7ea"),Object(u["a"])(at,nt,rt,!1,null,"56b3f4e2",null)),ot=st.exports,ct=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"root",staticClass:"v-category-badge",class:{active:!!e.active}},[n("button",{on:{click:e.activateHandler,blur:function(t){return e.cancelHandler(t)}}},[n("h6",{domProps:{innerHTML:e._s(e.processText(e.category.title))}})]),n("button",{on:{click:e.removeHandler,blur:function(t){return e.cancelHandler(t)}}},[n("span",{staticClass:"icon-close"})])])},lt=[],ut={name:"CategoryBadge",props:{category:Object,search:String},data:function(){return{active:!1}},methods:{processText:function(e){return Xe(e,this.search)},activateHandler:function(){this.active=!this.active},removeHandler:function(){this.$emit("remove",this.category.id)},cancelHandler:function(e){this.$refs.root.contains(e.relatedTarget)||(this.active=!1)}}},dt=ut,pt=(n("4ca3"),Object(u["a"])(dt,ct,lt,!1,null,"02c27587",null)),ft=pt.exports,mt={name:"NoteEditor",components:{"v-icon-button":ne,"v-text-editor":tt,"v-category-input":ot,"v-category-badge":ft},props:{item:{type:Object,default:function(){return{id:"",title:"",text:""}}},search:String},computed:{categories:function(){var e=this.$store.state.category,t=this.$store.state.categoryentity,n={};for(var r in t)this.item.id===E(r)&&(n[x(r)]=e[x(r)]);return n}},methods:{titleInput:function(e){this.item.title=e,this.$store.dispatch("setModelItem",{model:"note",id:this.item.id,item:{title:e}})},textInput:function(e){this.item.text=e,this.$store.dispatch("setModelItem",{model:"note",id:this.item.id,item:{text:e}})},createCategoryHandler:function(e){var t=this,n=function(){var n=t.$store.getters.newId();t.$store.state.note[t.item.id]||t.$store.dispatch("setModelItem",{model:"note",id:t.item.id,item:{}}),t.$store.dispatch("setModelItem",{model:"category",id:n,item:b("category",n,{title:e})}),t.$store.dispatch("setModelItem",{model:"categoryentity",id:O(n,t.item.id),item:{category:n,entity:t.item.id}})};this.$emit("show-dialog",{title:"Warning",text:"Do you want to cretate new category '"+e+"'?",buttons:[{title:"Create",handler:n},{title:"Cancel",handler:void 0}]})},selectCategoryHandler:function(e){this.$store.state.note[this.item.id]||this.$store.dispatch("setModelItem",{model:"note",id:this.item.id,item:{}}),this.$store.dispatch("setModelItem",{model:"categoryentity",id:O(e,this.item.id),item:{category:e,entity:this.item.id}})},removeCategoryHandler:function(e){this.$store.dispatch("deleteModelItem",{model:"categoryentity",id:O(e,this.item.id)})}}},ht=mt,_t=(n("38aa"),Object(u["a"])(ht,We,Ae,!1,null,"6744674b",null)),vt=_t.exports,gt={name:"Notes",components:{"v-icon-button":ne,"v-search":ce,"v-notes-list":Se,"v-filters-list":Ue,"v-note-editor":vt,"v-list-frame":be},props:{settingsMenu:Boolean},data:function(){return{filtersMenu:!1,search:"",filters:[],note:this.makeNote()}},methods:{makeNote:function(){return b("note",this.$store.getters.newId())},actionHandler:function(e){var t=this,n=function(){t.$store.dispatch("deleteModelItem",{model:"note",id:t.note.id}),t.note=t.makeNote()};"add"===e?this.note=this.makeNote():"delete"===e&&this.$emit("show-dialog",{title:"Warning",text:'You want to delete "'+(this.note.title||"untitled")+'" note. Are you sure?',buttons:[{title:"Delete",handler:n},{title:"Close",handler:void 0}]})},selectNoteHandler:function(e){this.note=e}},mounted:function(){var e=this;this.$store.subscribe((function(t,n){"setModelItem"===t.type&&"note"===t.payload.model&&t.payload.id===e.note.id&&(e.note=n.note[e.note.id]),"deleteModelItem"===t.type&&"note"===t.payload.model&&t.payload.id===e.note.id&&(e.note=e.makeNote())}))}},yt=gt,bt=(n("af54"),Object(u["a"])(yt,Ce,ke,!1,null,"1d0fcc84",null)),wt=bt.exports,Et=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{attrs:{id:"view-categories"}},[n("v-list-frame",{attrs:{id:"view-categories-list"}},[n("div",{staticClass:"header"},[n("div",{staticClass:"title"},[n("h5",[e._v("Categories")]),n("v-icon-button",{class:{active:e.settingsMenu},attrs:{icon:"icon-settings"},on:{click:function(t){return e.$emit("show-settings-menu",!e.settingsMenu)}}})],1),n("v-search",{model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),n("v-categories-list",{staticClass:"content",attrs:{search:e.search,selected:e.category},on:{select:function(t){return e.selectCategoryHandler(t)}}})],1),n("v-category-editor",{attrs:{search:e.search,id:"view-categories-content",item:e.category},on:{action:e.actionHandler}})],1)},xt=[],Ot=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-categories-list"},[e.search?e._l(e.searchedItems,(function(t){return n("v-drag-and-drop",{key:t.id,attrs:{detail:{type:"category",id:t.id}},nativeOn:{drop:function(n){return e.dropHandler(n.detail.type,t.id,n.detail.id)}}},[n("div",{staticClass:"item",class:{active:e.selected.id===t.id},on:{click:function(n){return e.$emit("select",t.category)}}},[n("div",[n("sub",[e._v(e._s(t.path))]),t.category.title?n("h5",[e._v(e._s(t.category.title))]):e._e()])])])})):e._l(e.unaffectedItems,(function(t){return n("v-drag-and-drop",{key:t.id,attrs:{detail:{type:"category",id:t.id}},nativeOn:{drop:function(n){return e.dropHandler(n.detail.type,t.id,n.detail.id)}}},[n("div",{staticClass:"item",class:{hidden:e.isCollapsed(t.category.parent),active:e.selected.id===t.id},on:{click:function(n){return e.$emit("select",t.category)}}},[e._l(t.level,(function(e){return n("span",{key:"level"+e,staticClass:"item-padding"})})),n("button",{on:{click:function(n){return n.stopPropagation(),e.collapseHandler(t.id)}}},[e.children[t.id]?e.collapsed[t.id]?n("span",{staticClass:"icon-arrow-right"}):n("span",{staticClass:"icon-arrow-drop-down"}):n("span",{staticClass:"icon-arrow-right disabled"})]),n("div",[t.category.title?n("h5",[e._v(e._s(t.category.title))]):e._e()])],2)])}))],2)},Ct=[],kt=(n("a15b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"root",staticClass:"v-drag-and-drop"},[n("div",{ref:"content"},[e._t("default")],2)])}),Mt=[],$t={name:"DragAndDrop",props:{detail:{type:void 0,default:void 0}},mouseController:void 0,methods:{beginDragHandler:function(){var e=this.$refs.root,t=this.$refs.content;e.style.height=t.getBoundingClientRect().height+"px",t.style.width=e.getBoundingClientRect().width+"px"},endDropHandler:function(){this.$refs.root.style.height="",this.$refs.content.style.width=""}},mounted:function(){this.mouseController=Object(g["c"])(this.$refs.content,this.detail,this.beginDragHandler,void 0,this.endDropHandler),this.mouseController.bind()},beforeDestroy:function(){this.mouseController.unbind()}},It=$t,jt=Object(u["a"])(It,kt,Mt,!1,null,"56659840",null),Tt=jt.exports,Dt={name:"CategoriesList",components:{"v-drag-and-drop":Tt},props:{selected:{type:Object,default:function(){return{}}},search:String},data:function(){return{collapsed:{}}},computed:{children:function(){var e=this.$store.state.category,t={};for(var n in e){var r=e[n].parent;t[r]||(t[r]=[]),t[r].push(n)}return t},unaffectedItems:function(){var e=this.$store.state.category,t=this.children,n=[],r=function r(i,a,s){if(i?s+=e[i].title+" / ":s="/ ",t[i]){var o,c=Object(m["a"])(t[i]);try{for(c.s();!(o=c.n()).done;){var l=o.value;n.push({id:l,level:a,path:s,category:e[l]}),t[l]&&r(l,a+1,s)}}catch(u){c.e(u)}finally{c.f()}}};return r(void 0,0,""),n},searchedItems:function(){var e=this.search,t=this.$store.state.category,n=[];for(var r in t){var i=t[r],a=[i.title,i.text];if(this.match(e,a)){var s=t[i.parent],o=[];while(s)o.push(s.title),s=t[s.parent];o="/ "+o.reverse().join(" / "),n.push({id:r,path:o,category:i})}}return n}},methods:{match:function(e,t){e=e.toLowerCase();var n,r=Object(m["a"])(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(-1!==i.toLowerCase().indexOf(e))return!0}}catch(a){r.e(a)}finally{r.f()}return!1},isCollapsed:function(e){var t=this.$store.state.category;while(e){if(!0===this.collapsed[e])return!0;e=t[e].parent}return!1},collapseHandler:function(e){r["a"].set(this.collapsed,e,!this.collapsed[e])},dropHandler:function(e,t,n){if("category"===e){var r=this.$store.state.category,i=t;while(i){if(i===n)break;i=r[i].parent}i||(t===r[n].parent&&(t=r[t].parent),this.$store.dispatch("setModelItem",{model:"category",id:n,item:{parent:t}}))}}}},St=Dt,Pt=(n("89b9"),Object(u["a"])(St,Ot,Ct,!1,null,"37ece740",null)),Rt=Pt.exports,Lt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-category-editor"},[n("div",{staticClass:"header"},[n("v-icon-button",{attrs:{icon:"icon-add"},on:{click:function(t){return e.$emit("action","add")}}}),n("v-icon-button",{attrs:{icon:"icon-delete"},on:{click:function(t){return e.$emit("action","delete")}}})],1),n("div",{staticClass:"content"},[n("v-text-editor",{staticClass:"title",attrs:{value:e.item.title,search:e.search,placeholder:"Category title",multiline:!1},on:{input:function(t){return e.titleInput(t)}}}),n("v-text-editor",{staticClass:"text",attrs:{value:e.item.text,search:e.search,placeholder:"Category text"},on:{input:function(t){return e.textInput(t)}}})],1)])},Ht=[],Nt={name:"CategoryEditor",components:{"v-icon-button":ne,"v-text-editor":tt},props:{item:{type:Object,default:function(){return{id:"",title:"",text:""}}},search:String},methods:{titleInput:function(e){this.item.title=e,this.$store.dispatch("setModelItem",{model:"category",id:this.item.id,item:{title:e}})},textInput:function(e){this.item.text=e,this.$store.dispatch("setModelItem",{model:"category",id:this.item.id,item:{text:e}})}}},Ut=Nt,Wt=(n("470e"),Object(u["a"])(Ut,Lt,Ht,!1,null,"1fe92890",null)),At=Wt.exports,Bt={name:"Categories",components:{"v-icon-button":ne,"v-search":ce,"v-categories-list":Rt,"v-category-editor":At,"v-list-frame":be},props:{settingsMenu:Boolean},data:function(){return{search:"",category:this.makeCategory()}},methods:{makeCategory:function(){return b("category",this.$store.getters.newId())},actionHandler:function(e){var t=this,n=function(){t.$store.dispatch("deleteModelItem",{model:"category",id:t.category.id}),t.category=t.makeCategory()};"add"===e?this.category=this.makeCategory():"delete"===e&&this.$emit("show-dialog",{title:"Warning",text:'You want to delete "'+(this.category.title||"untitled")+'" category. All dependent categories will also be removed. Are you sure?',buttons:[{title:"Delete",handler:n},{title:"Close",handler:void 0}]})},selectCategoryHandler:function(e){this.category=e}},mounted:function(){var e=this;this.$store.subscribe((function(t,n){"setModelItem"===t.type&&"category"===t.payload.model&&t.payload.id===e.category.id&&(e.category=n.category[e.category.id]),"deleteModelItem"===t.type&&"category"===t.payload.model&&t.payload.id===e.category.id&&(e.category=e.makeCategory())}))}},Kt=Bt,qt=(n("9c68"),Object(u["a"])(Kt,Et,xt,!1,null,"800b1a4a",null)),zt=qt.exports,Gt=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Yt=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{attrs:{id:"view-settings"}},[n("h2",[e._v("Settings")]),n("h5",[e._v("Sorry the page isn't ready yet...")])])}],Ft={name:"Settings"},Jt=Ft,Vt=(n("0699"),Object(u["a"])(Jt,Gt,Yt,!1,null,"03f34384",null)),Xt=Vt.exports,Zt=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Qt=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{attrs:{id:"view-account"}},[n("h2",[e._v("Account")]),n("h5",[e._v("Sorry the page isn't ready yet...")])])}],en={name:"Account"},tn=en,nn=(n("61cf"),Object(u["a"])(tn,Zt,Qt,!1,null,"204d97c2",null)),rn=nn.exports,an=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},sn=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{attrs:{id:"view-error"}},[n("h1",[e._v("Some error occured...")])])}],on={name:"Error"},cn=on,ln=Object(u["a"])(cn,an,sn,!1,null,"2b4a9a6a",null),un=ln.exports;r["a"].use(i["a"]),r["a"].use(a["a"]),r["a"].config.productionTip=!1,r["a"].config.devtools=!1;var dn=new i["a"].Store(j),pn=new a["a"]({mode:"history",routes:[{path:"/",name:"index",component:F,meta:{auth:!1}},{path:"/app",component:Oe,meta:{auth:!0},children:[{path:"notes",name:"notes",component:wt,meta:{auth:!0}},{path:"categories",name:"categories",component:zt,meta:{auth:!0}},{path:"settings",name:"settings",component:Xt,meta:{auth:!0}},{path:"account",name:"account",component:rn,meta:{auth:!0}}]},{path:"/error",name:"error",component:un},{path:"*",redirect:"/error"}]});dn.watch((function(e){return e.user}),(function(e){e?(!1===pn.currentRoute.meta.auth&&pn.push({name:"notes"}).catch((function(){})),setTimeout((function(){return dn.dispatch("loadModels")}),100)):(!0===pn.currentRoute.meta.auth&&pn.push({name:"index"}).catch((function(){})),dn.dispatch("clearState"))})),pn.beforeEach((function(e,t,n){var r=void 0;dn.state.user?!1===e.meta.auth&&(r=!1):dn.state.user||!0===e.meta.auth&&(r={name:"index"}),n(r)})),dn.dispatch("status"),new r["a"]({router:pn,store:dn,render:function(e){return e(p)}}).$mount("#application")},"5e02":function(e,t,n){},"61cf":function(e,t,n){"use strict";var r=n("1e78"),i=n.n(r);i.a},"630b":function(e,t,n){},"64ef":function(e,t,n){"use strict";var r=n("822a"),i=n.n(r);i.a},"6b49":function(e,t,n){"use strict";var r=n("2d12"),i=n.n(r);i.a},"6c1d":function(e,t,n){"use strict";var r=n("b25f"),i=n.n(r);i.a},"74d8":function(e,t,n){},"794b":function(e,t,n){},"7d60":function(e,t,n){},"822a":function(e,t,n){},"83fd":function(e,t,n){"use strict";var r=n("03f7"),i=n.n(r);i.a},8814:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("c975"),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("a434"),core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_2__),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("96cf"),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_3__),E_smart_notes_frontend_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("1da1"),E_smart_notes_frontend_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("d4ec"),E_smart_notes_frontend_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("bee2"),uuid__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("ec26"),_utils_utils_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("fa7d"),WEBSOCKET_URI=eval("'wss://' + location.host + '/connection'"),WEBSOCKET_CONNECTION_TIMEOUT="10000",WEBSOCKET_RECONNECTION_TIMEOUT=5e3,WEBSOCKET_REQUEST_TIMEOUT="60000",Server=function(){function e(){Object(E_smart_notes_frontend_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__["a"])(this,e),this.ws=void 0,this.deferredMessages=[],this.awaitedMessages={},this.listeners=[]}return Object(E_smart_notes_frontend_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_6__["a"])(e,[{key:"connect",value:function(){var e=Object(E_smart_notes_frontend_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,n){try{t.ws&&t.ws.readyState!==WebSocket.CLOSING&&t.ws.readyState!==WebSocket.CLOSED&&t.ws.close(),t.ws=new WebSocket(WEBSOCKET_URI),t.ws.addEventListener("open",(function(n){e(n);for(var r=0;r<t.deferredMessages.length;++r)t.deferredMessages[r].resolve()})),t.ws.addEventListener("close",(function(e){n(e)})),t.ws.addEventListener("error",(function(e){n(e)})),setTimeout((function(){n("connection timeout")}),WEBSOCKET_CONNECTION_TIMEOUT),t.ws.addEventListener("message",(function(e){var n=JSON.parse(e.data);if("id"in n&&"type"in n&&"message"in n)if("response"===n.type)n.id in t.awaitedMessages?(t.awaitedMessages[n.id].resolve(n.message),delete t.awaitedMessages[n.id]):console.error("ERROR","unknown request id");else if("notify"===n.type)for(var r=0;r<t.listeners.length;++r)t.listeners[r].type===n.message.type&&t.listeners[r].handler(n.message);else console.error("ERROR","unknown request type");else console.error("ERROR","unknown request structure")}))}catch(r){n(r)}}));case 3:e.next=12;break;case 5:return e.prev=5,e.t0=e["catch"](0),console.error("ERROR","connection error",e.t0),e.next=10,Object(_utils_utils_js__WEBPACK_IMPORTED_MODULE_8__["a"])(WEBSOCKET_RECONNECTION_TIMEOUT);case 10:return e.next=12,this.connect();case 12:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"request",value:function(){var e=Object(E_smart_notes_frontend_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.ws&&this.ws.readyState!==WebSocket.CLOSING&&this.ws.readyState!==WebSocket.CLOSED){e.next=5;break}return e.next=3,this.connect();case 3:e.next=8;break;case 5:if(this.ws.readyState!==WebSocket.CONNECTING){e.next=8;break}return e.next=8,new Promise((function(e,t){n.deferredMessages.push({resolve:e,reject:t})}));case 8:return e.abrupt("return",new Promise((function(e,r){var i=Object(uuid__WEBPACK_IMPORTED_MODULE_7__["a"])(),a="request";n.ws.send(JSON.stringify({id:i,type:a,message:t})),n.awaitedMessages[i]={resolve:e,reject:r},setTimeout((function(){r("request timeout")}),WEBSOCKET_REQUEST_TIMEOUT)})));case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"notify",value:function(){var e=Object(E_smart_notes_frontend_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__["a"])(regeneratorRuntime.mark((function e(t){var n,r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.ws&&this.ws.readyState!==WebSocket.CLOSING&&this.ws.readyState!==WebSocket.CLOSED){e.next=5;break}return e.next=3,this.connect();case 3:e.next=8;break;case 5:if(this.ws.readyState!==WebSocket.CONNECTING){e.next=8;break}return e.next=8,new Promise((function(e,t){i.deferredMessages.push({resolve:e,reject:t})}));case 8:n=Object(uuid__WEBPACK_IMPORTED_MODULE_7__["a"])(),r="notify",this.ws.send(JSON.stringify({id:n,type:r,message:t}));case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"addNotificationListener",value:function(e,t){-1===this.listeners.indexOf({type:e,handler:t})&&this.listeners.push({type:e,handler:t})}},{key:"removeNotificationListener",value:function(e,t){var n=this.listeners.indexOf({type:e,handler:t});n>-1&&this.listeners.splice(n,1)}}]),e}();__webpack_exports__["a"]=Server},"89b9":function(e,t,n){"use strict";var r=n("a6f4"),i=n.n(r);i.a},"8a37":function(e,t,n){"use strict";var r=n("5e02"),i=n.n(r);i.a},"9c68":function(e,t,n){"use strict";var r=n("cccc"),i=n.n(r);i.a},a207:function(e,t,n){},a6f4:function(e,t,n){},aac3:function(e,t,n){},af54:function(e,t,n){"use strict";var r=n("3686"),i=n.n(r);i.a},b25f:function(e,t,n){},b965:function(e,t,n){"use strict";var r=n("0b1c"),i=n.n(r);i.a},bef3:function(e,t,n){"use strict";var r=n("7d60"),i=n.n(r);i.a},cccc:function(e,t,n){},d0bc:function(e,t,n){e.exports=n.p+"img/Logo.white.svg"},e882:function(e,t,n){},f0d4:function(e,t,n){},f434:function(e,t,n){"use strict";var r=n("fcab"),i=n.n(r);i.a},f7ea:function(e,t,n){"use strict";var r=n("630b"),i=n.n(r);i.a},fa7d:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a}));n("99af"),n("d3b7");var r=function(e){var t=function(e){return e<10?"0"+String(e):String(e)},n=function(e){return e<100?"0"+t(e):String(e)},r=function(e){return e<1e3?"0"+n(e):String(e)};return"".concat(r(e.getFullYear()),"-").concat(t(e.getMonth()+1),"-").concat(t(e.getDate())," ").concat(t(e.getHours()),":").concat(t(e.getMinutes()),":").concat(t(e.getSeconds()),".").concat(n(e.getMilliseconds()))},i=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function a(e,t,n,r,i){var a,s,o,c=function(t){o=!1,a=t.clientX-e.getBoundingClientRect().x,s=t.clientY-e.getBoundingClientRect().y,window.addEventListener("mousemove",l),window.addEventListener("mouseup",u)},l=function(t){t.preventDefault(),t.stopPropagation(),o||(o=!0,e.style.position="fixed",e.style.zIndex="10000",e.style.pointerEvents="none",e.style.boxShadow="0 0 0 1px $color-primary",n&&n()),e.style.left=t.clientX-a+"px",e.style.top=t.clientY-s+"px",r&&r()},u=function n(r){o&&(r.preventDefault(),r.stopPropagation(),e.style="",i&&i(),document.elementFromPoint(r.clientX,r.clientY).dispatchEvent(new CustomEvent("drop",{detail:t,bubbles:!0}))),window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",n)},d={bind:function(){e.addEventListener("mousedown",c)},unbind:function(){e.removeEventListener("mousedown",c)}};return d}},fcab:function(e,t,n){}});
//# sourceMappingURL=app.js.map